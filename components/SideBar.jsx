/* eslint-disable @next/next/no-img-element */
"use client";

import { useEffect } from "react";
import { useMobile } from "@/context/MobileContext";
import { useRouter } from "next/navigation";
import { useAuth } from "@/context/AuthContext";
import React, { useState } from "react";
import "@/components/styles/SideBar.css";

export default function SideBar({ onSelectPage }) {
  const { isMobile, windowSize } = useMobile();
  const { user, signOutUser } = useAuth();
  const [selectedPage, setSelectedPage] = useState([]);

  useEffect(() => {
      setSelectedPage(localStorage.getItem("paginaPrincipal"));
  }, [selectedPage]);
  const handleSelectSideBar = (page) => {
    setSelectedPage(page);
    onSelectPage(page);
  };

  return (
    <aside className={`flex flex-col md:flex-col w-full h-20 justify-evenly md:justify-normal md:w-1/2 lg:w-1/3 xl:w-1/4 lg:w-88 md:h-screen overflow-hidden text-text-900 bg-accent-100 rounded-t-xl md:rounded-r-3xl md:rounded-l-none`}>
      <div className="hidden md:flex flex-row w-full p-8 items-center gap-2">
        <svg
          className="fill-accent-600 w-16"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 1000 1000"
        >
          <path
            className="cls-1"
            d="M289.64,280.43q14.5-11.25,29.95-21.27a247.78,247.78,0,0,1,74.91-32.91,243.27,243.27,0,0,1,79.67-5.86,293.89,293.89,0,0,1,42.41,7c24.57,5.84,48.73,13,72.66,20.86,6.82,2.25,7.3.06,7-5.65a254,254,0,0,1,.12-36.7c3.06-34.25,21.17-48.19,55.12-43,30.84,4.76,59,16.75,85.92,31.8,31,17.31,58.89,38.55,81.91,65.81,30.08,35.6,45.74,77.25,51.45,123,.65,5.2,1.08,10.43,1.62,15.64-.27,16.67-1,33.29-4.91,49.61-7.54,31.37-26,47-58.2,50.87-16.89,2-33.55.21-50.33-.19-14.61-.36-29.25-1.14-43.78-1.92-18-1-36.13-1.77-54.15-2.38-26.12-.89-52.16-4.07-78.75-2.89.31,3.18,3.09,4.29,5,5.86a252.11,252.11,0,0,1,19.59,18.53c14.08,14.6,15.44,37.88,5.66,55.18-2.89,5.11-7.62.7-11.5-1.4-5.1-2.76-10.06-5.77-15-8.86-9.55-6-18.83-12.49-28.47-18.37-8.51-5.19-17.13-10.2-26-14.74s-18.2-7.37-26.91-11.73c-43.79-15.58-86.44-12.83-127.23,10-15.94,8.93-29.33,23.73-39.55,38.68a12.06,12.06,0,0,1-3.6,3.91c-3.26,1.87-4.84-.63-6.45-3-2-3-4.1-5.91-5.83-9.07a69.43,69.43,0,0,1-7.05-18c-2.52-11.2,1.48-20.64,8.62-29,9.47-11.12,20.8-20.13,32.48-28.76,3.36-2.48,6.66-5.06,11.05-8.41-5.47-.78-8.89,1.38-12.44,2.44-24.4,7.28-47.64,16.82-65.83,35.56-23.18,23.9-34.36,53.6-39.78,85.61-6.55,38.77-2.57,76.16,21.51,108.66C301.82,747.68,342.9,773,397,770.62c31.51-1.4,59.86-12.81,80.06-38.23,17.93-22.56,19.48-48.11,7.81-74.11-6.73-15-19.87-21.15-35.71-21.91-18.06-.86-18.13-.75-20.83,16.75-1.72,11.18-4.55,21.82-10.65,31.65-10.6,17.1-44.11,26.54-64.74,9.31-10-8.32-12.17-22.15-11.11-35.3,3.94-48.45,48.06-88.86,96.5-88,25.52.46,47.41,11.22,66.89,26.92,31.4,25.31,49.26,57.5,47.15,98.72-1.75,34.31-17.25,62.45-41.75,85.74C481.36,810,446.94,828.33,407.07,836c-34.53,6.65-67.43-.08-99.94-11.52-16.82-5.93-33.39-12.7-48.49-21.81-16.23-9.8-32.38-19.85-46.77-32.78-27.4-24.65-48.61-53.32-62.4-87.36C126.53,626,124,567.66,136.42,508.42c9.83-46.82,31.16-90.53,58.8-129.33a476.88,476.88,0,0,1,56.09-65.31A458.14,458.14,0,0,1,289.64,280.43Zm494,71.36c.08-49.48-53-80.73-95.76-59.62-35.55,17.54-46.72,59.45-23.87,89.53a68.4,68.4,0,0,0,87.33,19C772,389.54,782.45,371.86,783.66,351.79Z"
          />
          <path
            className="cls-1"
            d="M706.89,361.66a25.4,25.4,0,1,1,.76-50.8c13.51.23,25.35,12.53,24.87,25.85C732,350.75,720.62,361.85,706.89,361.66Z"
          />
        </svg>
        <h2 className="text-2xl text-accent-600">ProgQuest</h2>
      </div>
      <hr className="hidden md:flex mb-6 border-accent-600 w-3/4 self-center" />
      <div className="flex flex-row w-full justify-between h-full md:flex-col">
        <div className="flex flex-row w-full justify-evenly md:flex-col gap-1">
          <button
            onClick={() => handleSelectSideBar("exercicios")}
            className={`flex flex-col md:flex-row text-xs sm:text-sm gap-1 md:gap-2 items-center justify-center md:justify-normal aspect-square m-1 rounded-xl md:aspect-auto md:p-4 md:text-lg md:px-10 md:mx-6 hover:bg-accent-200 border-2 ${
              selectedPage === "exercicios"
                ? "bg-accent-200 border-accent-500 text-accent-500 font-bold"
                : "border-transparent text-text-900"
            }`}
          >
            <svg
              width="34"
              height="33"
              className={`${
                selectedPage === "exercicios"
                  ? "fill-accent-500 h-6"
                  : "fill-text-900"
              } h-6`}
              viewBox="0 0 34 33"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M31.4167 12.1761L29.0833 9.87389L30.3333 8.59945L25 3.33722L23.7083 4.57056L21.3333 2.22723L22.5833 0.952781C23.2222 0.322411 24.0139 0.0140774 24.9583 0.0277811C25.9028 0.0414848 26.6944 0.363522 27.3333 0.993892L32.7083 6.29722C33.3472 6.92759 33.6667 7.70185 33.6667 8.62C33.6667 9.53815 33.3472 10.3124 32.7083 10.9428L31.4167 12.1761ZM11.4167 31.9506C10.7778 32.5809 9.99306 32.8961 9.0625 32.8961C8.13194 32.8961 7.34722 32.5809 6.70833 31.9506L1.33333 26.6472C0.694444 26.0169 0.375 25.2426 0.375 24.3244C0.375 23.4063 0.694444 22.632 1.33333 22.0017L2.58333 20.7683L4.95833 23.1117L3.66667 24.345L9.04167 29.6483L10.2917 28.3739L12.6667 30.7172L11.4167 31.9506ZM27.9583 18.1372L30.3333 15.7939L17.7083 3.33722L15.3333 5.68056L27.9583 18.1372ZM16.2917 29.6483L18.6667 27.2639L6.08333 14.8483L3.66667 17.1917L16.2917 29.6483ZM16.0417 20.0283L20.625 15.5472L17.9583 12.9161L13.4167 17.4383L16.0417 20.0283ZM18.6667 31.9506C18.0278 32.5809 17.2361 32.8961 16.2917 32.8961C15.3472 32.8961 14.5556 32.5809 13.9167 31.9506L1.33333 19.535C0.694444 18.9046 0.375 18.1235 0.375 17.1917C0.375 16.2598 0.694444 15.4787 1.33333 14.8483L3.70833 12.505C4.34722 11.8746 5.13194 11.5594 6.0625 11.5594C6.99306 11.5594 7.77778 11.8746 8.41667 12.505L11.0417 15.095L15.625 10.5728L13 8.02389C12.3611 7.39352 12.0417 6.61241 12.0417 5.68056C12.0417 4.74871 12.3611 3.9676 13 3.33722L15.375 0.993892C16.0139 0.363522 16.7986 0.0483367 17.7292 0.0483367C18.6597 0.0483367 19.4444 0.363522 20.0833 0.993892L32.7083 13.4506C33.3472 14.0809 33.6667 14.8552 33.6667 15.7733C33.6667 16.6915 33.3472 17.4657 32.7083 18.0961L30.3333 20.4394C29.6944 21.0698 28.9028 21.385 27.9583 21.385C27.0139 21.385 26.2222 21.0698 25.5833 20.4394L23 17.8494L18.4167 22.3717L21.0417 24.9617C21.6806 25.592 22 26.3663 22 27.2844C22 28.2026 21.6806 28.9769 21.0417 29.6072L18.6667 31.9506Z" />
            </svg>
            Exercícios
          </button>
          <button
            onClick={() => handleSelectSideBar("nivel")}
            className={`flex flex-col md:flex-row text-xs sm:text-sm gap-1 md:gap-2 items-center justify-center md:justify-normal aspect-square m-1 rounded-xl md:aspect-auto md:p-4 md:text-lg md:px-10 md:mx-6 hover:bg-accent-200 border-2 ${
              selectedPage === "nivel"
                ? "bg-accent-200 border-accent-500 text-accent-500 font-bold"
                : "border-transparent text-text-900"
            }`}
          >
            <svg
              width="30"
              height="34"
              className={`${
                selectedPage === "nivel"
                  ? "fill-accent-500 h-6"
                  : "fill-text-900"
              } h-6`}
              viewBox="0 0 30 34"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M3.33333 34.0003C2.41667 34.0003 1.63194 33.6739 0.979167 33.0212C0.326389 32.3684 0 31.5837 0 30.667V7.33366C0 6.41699 0.326389 5.63227 0.979167 4.97949C1.63194 4.32671 2.41667 4.00033 3.33333 4.00033H10.2917C10.5972 3.0281 11.1944 2.22949 12.0833 1.60449C12.9722 0.979492 13.9444 0.666992 15 0.666992C16.1111 0.666992 17.1042 0.979492 17.9792 1.60449C18.8542 2.22949 19.4444 3.0281 19.75 4.00033H26.6667C27.5833 4.00033 28.3681 4.32671 29.0208 4.97949C29.6736 5.63227 30 6.41699 30 7.33366V30.667C30 31.5837 29.6736 32.3684 29.0208 33.0212C28.3681 33.6739 27.5833 34.0003 26.6667 34.0003H3.33333ZM3.33333 30.667H26.6667V7.33366H23.3333V12.3337H6.66667V7.33366H3.33333V30.667ZM15 7.33366C15.4722 7.33366 15.8681 7.17394 16.1875 6.85449C16.5069 6.53505 16.6667 6.13921 16.6667 5.66699C16.6667 5.19477 16.5069 4.79894 16.1875 4.47949C15.8681 4.16005 15.4722 4.00033 15 4.00033C14.5278 4.00033 14.1319 4.16005 13.8125 4.47949C13.4931 4.79894 13.3333 5.19477 13.3333 5.66699C13.3333 6.13921 13.4931 6.53505 13.8125 6.85449C14.1319 7.17394 14.5278 7.33366 15 7.33366Z" />
            </svg>
            Nível
          </button>
          <button
            onClick={() => handleSelectSideBar("desafios")}
            className={`flex flex-col md:flex-row text-xs sm:text-sm gap-1 md:gap-2 items-center justify-center md:justify-normal aspect-square m-1 rounded-xl md:aspect-auto md:p-4 md:text-lg md:px-10 md:mx-6 hover:bg-accent-200 border-2 ${
              selectedPage === "desafios"
                ? "bg-accent-200 border-accent-500 text-accent-500 font-bold"
                : "border-transparent text-text-900"
            }`}
          >
            <svg
              width="34"
              height="34"
              className={`${
                selectedPage === "desafios"
                  ? "fill-accent-500 h-6"
                  : "fill-text-900"
              } h-6`}
              viewBox="0 0 34 34"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M17.0002 33.6663C14.6946 33.6663 12.5279 33.2288 10.5002 32.3538C8.47238 31.4788 6.7085 30.2913 5.2085 28.7913C3.7085 27.2913 2.521 25.5275 1.646 23.4997C0.770996 21.4719 0.333496 19.3052 0.333496 16.9997C0.333496 14.6941 0.770996 12.5275 1.646 10.4997C2.521 8.4719 3.7085 6.70801 5.2085 5.20801C6.7085 3.70801 8.47238 2.52051 10.5002 1.64551C12.5279 0.770508 14.6946 0.333008 17.0002 0.333008C19.3057 0.333008 21.4724 0.770508 23.5002 1.64551C25.5279 2.52051 27.2918 3.70801 28.7918 5.20801C30.2918 6.70801 31.4793 8.4719 32.3543 10.4997C33.2293 12.5275 33.6668 14.6941 33.6668 16.9997C33.6668 19.3052 33.2293 21.4719 32.3543 23.4997C31.4793 25.5275 30.2918 27.2913 28.7918 28.7913C27.2918 30.2913 25.5279 31.4788 23.5002 32.3538C21.4724 33.2288 19.3057 33.6663 17.0002 33.6663ZM17.0002 30.333C20.7224 30.333 23.8752 29.0413 26.4585 26.458C29.0418 23.8747 30.3335 20.7219 30.3335 16.9997C30.3335 13.2775 29.0418 10.1247 26.4585 7.54134C23.8752 4.95801 20.7224 3.66634 17.0002 3.66634C13.2779 3.66634 10.1252 4.95801 7.54183 7.54134C4.9585 10.1247 3.66683 13.2775 3.66683 16.9997C3.66683 20.7219 4.9585 23.8747 7.54183 26.458C10.1252 29.0413 13.2779 30.333 17.0002 30.333ZM17.0002 26.9997C14.2224 26.9997 11.8613 26.0275 9.91683 24.083C7.97238 22.1386 7.00016 19.7775 7.00016 16.9997C7.00016 14.2219 7.97238 11.8608 9.91683 9.91634C11.8613 7.9719 14.2224 6.99967 17.0002 6.99967C19.7779 6.99967 22.1391 7.9719 24.0835 9.91634C26.0279 11.8608 27.0002 14.2219 27.0002 16.9997C27.0002 19.7775 26.0279 22.1386 24.0835 24.083C22.1391 26.0275 19.7779 26.9997 17.0002 26.9997ZM17.0002 23.6663C18.8335 23.6663 20.4029 23.0136 21.7085 21.708C23.0141 20.4025 23.6668 18.833 23.6668 16.9997C23.6668 15.1663 23.0141 13.5969 21.7085 12.2913C20.4029 10.9858 18.8335 10.333 17.0002 10.333C15.1668 10.333 13.5974 10.9858 12.2918 12.2913C10.9863 13.5969 10.3335 15.1663 10.3335 16.9997C10.3335 18.833 10.9863 20.4025 12.2918 21.708C13.5974 23.0136 15.1668 23.6663 17.0002 23.6663ZM17.0002 20.333C16.0835 20.333 15.2988 20.0066 14.646 19.3538C13.9932 18.7011 13.6668 17.9163 13.6668 16.9997C13.6668 16.083 13.9932 15.2983 14.646 14.6455C15.2988 13.9927 16.0835 13.6663 17.0002 13.6663C17.9168 13.6663 18.7016 13.9927 19.3543 14.6455C20.0071 15.2983 20.3335 16.083 20.3335 16.9997C20.3335 17.9163 20.0071 18.7011 19.3543 19.3538C18.7016 20.0066 17.9168 20.333 17.0002 20.333Z" />
            </svg>
            Desafios
          </button>
          <button
            onClick={() => handleSelectSideBar("ranking")}
            className={`flex flex-col md:flex-row text-xs sm:text-sm gap-1 md:gap-2 items-center justify-center md:justify-normal aspect-square m-1 rounded-xl md:aspect-auto md:p-4 md:text-lg md:px-10 md:mx-6 hover:bg-accent-200 border-2 ${
              selectedPage === "ranking"
                ? "bg-accent-200 border-accent-500 text-accent-500 font-bold"
                : "border-transparent text-text-900"
            }`}
          >
            <svg
              width="30"
              height="30"
              className={`${
                selectedPage === "ranking"
                  ? "fill-accent-500 h-6"
                  : "fill-text-900"
              } h-6`}
              viewBox="0 0 30 30"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M6.66667 30V26.6667H13.3333V21.5C11.9722 21.1944 10.7569 20.6181 9.6875 19.7708C8.61806 18.9236 7.83333 17.8611 7.33333 16.5833C5.25 16.3333 3.50694 15.4236 2.10417 13.8542C0.701389 12.2847 0 10.4444 0 8.33333V6.66667C0 5.75 0.326389 4.96528 0.979167 4.3125C1.63194 3.65972 2.41667 3.33333 3.33333 3.33333H6.66667V0H23.3333V3.33333H26.6667C27.5833 3.33333 28.3681 3.65972 29.0208 4.3125C29.6736 4.96528 30 5.75 30 6.66667V8.33333C30 10.4444 29.2986 12.2847 27.8958 13.8542C26.4931 15.4236 24.75 16.3333 22.6667 16.5833C22.1667 17.8611 21.3819 18.9236 20.3125 19.7708C19.2431 20.6181 18.0278 21.1944 16.6667 21.5V26.6667H23.3333V30H6.66667ZM6.66667 13V6.66667H3.33333V8.33333C3.33333 9.38889 3.63889 10.3403 4.25 11.1875C4.86111 12.0347 5.66667 12.6389 6.66667 13ZM15 18.3333C16.3889 18.3333 17.5694 17.8472 18.5417 16.875C19.5139 15.9028 20 14.7222 20 13.3333V3.33333H10V13.3333C10 14.7222 10.4861 15.9028 11.4583 16.875C12.4306 17.8472 13.6111 18.3333 15 18.3333ZM23.3333 13C24.3333 12.6389 25.1389 12.0347 25.75 11.1875C26.3611 10.3403 26.6667 9.38889 26.6667 8.33333V6.66667H23.3333V13Z" />
            </svg>
            Ranking
          </button>
          <button
            onClick={() => handleSelectSideBar("perfil")}
            className={`flex flex-col md:flex-row text-xs sm:text-sm gap-1 md:gap-2 items-center justify-center md:justify-normal aspect-square m-1 rounded-xl md:aspect-auto md:p-4 md:text-lg md:px-10 md:mx-6 hover:bg-accent-200 border-2 ${
              selectedPage === "perfil"
                ? "bg-accent-200 border-accent-500 text-accent-500 font-bold"
                : "border-transparent text-text-900"
            }`}
          >
            <svg
              width="34"
              height="34"
              className={`${
                selectedPage === "perfil"
                  ? "fill-accent-500 h-6"
                  : "fill-text-900"
              } h-6`}
              viewBox="0 0 34 34"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M6.41683 26.083C8.05572 24.9071 9.7409 23.9974 11.4724 23.3538C13.2039 22.7103 15.0465 22.3886 17.0002 22.3886C18.9539 22.3886 20.8011 22.7103 22.5418 23.3538C24.2826 23.9974 25.9724 24.9071 27.6113 26.083C28.7502 24.7034 29.5812 23.2636 30.1043 21.7636C30.6275 20.2636 30.8891 18.6756 30.8891 16.9997C30.8891 13.083 29.5534 9.78902 26.8821 7.11772C24.2108 4.44641 20.9168 3.11076 17.0002 3.11076C13.0835 3.11076 9.78951 4.44641 7.11821 7.11772C4.4469 9.78902 3.11125 13.083 3.11125 16.9997C3.11125 18.6756 3.37745 20.2636 3.90987 21.7636C4.44229 23.2636 5.27794 24.7034 6.41683 26.083ZM16.995 18.3886C15.3781 18.3886 14.0164 17.8336 12.9099 16.7237C11.8034 15.6138 11.2502 14.2503 11.2502 12.6334C11.2502 11.0165 11.8051 9.65477 12.915 8.5483C14.025 7.4418 15.3884 6.88855 17.0053 6.88855C18.6222 6.88855 19.984 7.44352 21.0905 8.55347C22.1969 9.66338 22.7502 11.0268 22.7502 12.6437C22.7502 14.2607 22.1952 15.6224 21.0853 16.7288C19.9753 17.8353 18.6119 18.3886 16.995 18.3886ZM17.0132 33.6663C14.7175 33.6663 12.5557 33.2288 10.528 32.3538C8.50018 31.4788 6.73165 30.2867 5.22237 28.7775C3.71312 27.2682 2.521 25.5018 1.646 23.4784C0.770996 21.4549 0.333496 19.2929 0.333496 16.9923C0.333496 14.6917 0.770996 12.5321 1.646 10.5136C2.521 8.49505 3.71312 6.73116 5.22237 5.22188C6.73165 3.71263 8.49801 2.52051 10.5215 1.64551C12.5449 0.770508 14.7069 0.333008 17.0075 0.333008C19.3082 0.333008 21.4678 0.770508 23.4863 1.64551C25.5048 2.52051 27.2687 3.71263 28.778 5.22188C30.2872 6.73116 31.4793 8.49535 32.3543 10.5145C33.2293 12.5336 33.6668 14.691 33.6668 16.9867C33.6668 19.2824 33.2293 21.4441 32.3543 23.4719C31.4793 25.4997 30.2872 27.2682 28.778 28.7775C27.2687 30.2867 25.5045 31.4788 23.4854 32.3538C21.4663 33.2288 19.3089 33.6663 17.0132 33.6663ZM17.0002 30.8886C18.5094 30.8886 19.9677 30.6687 21.3752 30.2288C22.7826 29.789 24.1391 29.0645 25.4446 28.0552C24.1391 27.1201 22.778 26.4048 21.3613 25.9094C19.9446 25.414 18.4909 25.1663 17.0002 25.1663C15.5094 25.1663 14.0557 25.414 12.639 25.9094C11.2224 26.4048 9.86126 27.1201 8.55571 28.0552C9.86126 29.0645 11.2177 29.789 12.6252 30.2288C14.0326 30.6687 15.4909 30.8886 17.0002 30.8886ZM17.0002 15.6108C17.8705 15.6108 18.5835 15.333 19.1391 14.7775C19.6946 14.2219 19.9724 13.5089 19.9724 12.6386C19.9724 11.7682 19.6946 11.0552 19.1391 10.4997C18.5835 9.94412 17.8705 9.66634 17.0002 9.66634C16.1298 9.66634 15.4168 9.94412 14.8612 10.4997C14.3057 11.0552 14.0279 11.7682 14.0279 12.6386C14.0279 13.5089 14.3057 14.2219 14.8612 14.7775C15.4168 15.333 16.1298 15.6108 17.0002 15.6108Z" />
            </svg>
            Perfil
          </button>
        </div>
        <button
          onClick={signOutUser}
          className="hidden md:flex flex-col md:flex-row text-xs sm:text-sm gap-1 md:gap-2 items-center justify-center md:justify-normal aspect-square m-1 md:mb-4 rounded-xl md:aspect-auto md:p-4 md:text-lg md:px-10 md:mx-6 hover:bg-primary-200 text-fail-500 border-2 border-transparent active:border-fail-500"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 512 512"
          >
            <path
              fill="none"
              stroke="color(var(--fail-500))"
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth="32"
              d="M320 176v-40a40 40 0 0 0-40-40H88a40 40 0 0 0-40 40v240a40 40 0 0 0 40 40h192a40 40 0 0 0 40-40v-40m64-160l80 80l-80 80m-193-80h273"
            />
          </svg>
          Sair
        </button>
      </div>
    </aside>
  );
}
